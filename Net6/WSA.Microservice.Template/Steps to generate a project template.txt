Reference: https://docs.microsoft.com/en-us/visualstudio/ide/how-to-create-multi-project-templates?view=vs-2022


1) Before exporting solutin projects as project templates

- Replace all using statements of external project references with $ext_safeprojectname$

Source: using WSA.Microservice.Template.
Replace wit: using $ext_safeprojectname$.

Note: after exporting changes can be discarded.



2) After exporting solution projects as project templates.

- Edit each project to replace the external project references with the project name
- Use $ext_safeprojectname$ parameter to replace the project dependencies

<ItemGroup>
    <ProjectReference Include="..\$ext_safeprojectname$.Domain\$ext_safeprojectname$.Domain.csproj" />
</ItemGroup>




Steps to export project as template
------------------------------------------

1) Create a multi-project template from an existing solution
2) Create a solution and add two or more projects.

Customize the projects until they are ready to be exported to a template.
 
3) On the Project menu, choose Export Template.

The Export Template Wizard opens.

4) On the Choose Template Type page, select Project Template. Select one of the projects that you want to export to a template, and then choose Next. (You'll repeat these steps for each project in the solution.)

5) On the Select Template Options page, enter a name and optional description, icon, and preview image for your template. Choose Finish.

The project is exported into a .zip file and placed in the specified output location.

 Note: Each project must be exported to a template separately, so repeat the preceding steps for each project in the solution.

6) Create a directory for your template, with a subdirectory for each project.

7) Extract the contents of each project's .zip file into the corresponding subdirectory that you created.

8) In the base directory, create an XML file with a .vstemplate file extension. This file contains the metadata for the multi-project template. See the example that follows for the structure of the file. Be sure to specify the relative path to each project's vstemplate file.

9) Select all the files in the base directory, and from the right-click or context menu, choose Send to > Compressed (zipped) folder.

The files and folders are compressed into a .zip file.

10) Copy the .zip file into the user project template directory. By default, this directory is %USERPROFILE%\Documents\Visual Studio <version>\Templates\ProjectTemplates.

11) In Visual Studio, choose File > New > Project and verify that your template appears.